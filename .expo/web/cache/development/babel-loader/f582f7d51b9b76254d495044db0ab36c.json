{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport throttle from 'lodash/throttle';\nimport XDate from 'xdate';\nimport Context from \"../expandableCalendar/Context\";\nimport { UpdateSources } from \"../expandableCalendar/commons\";\nimport { isToday } from \"../dateutils\";\nimport Timeline from \"../timeline/Timeline\";\nimport InfiniteList from \"../infinite-list\";\nimport useTimelinePages, { INITIAL_PAGE, NEAR_EDGE_THRESHOLD } from \"./useTimelinePages\";\n\nvar TimelineList = function TimelineList(props) {\n  var timelineProps = props.timelineProps,\n      events = props.events,\n      renderItem = props.renderItem,\n      showNowIndicator = props.showNowIndicator,\n      scrollToFirst = props.scrollToFirst,\n      scrollToNow = props.scrollToNow,\n      initialTime = props.initialTime;\n\n  var _useContext = useContext(Context),\n      date = _useContext.date,\n      updateSource = _useContext.updateSource,\n      setDate = _useContext.setDate;\n\n  var listRef = useRef();\n  var prevDate = useRef(date);\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      timelineOffset = _useState2[0],\n      setTimelineOffset = _useState2[1];\n\n  var _useTimelinePages = useTimelinePages({\n    date: date,\n    listRef: listRef\n  }),\n      pages = _useTimelinePages.pages,\n      pagesRef = _useTimelinePages.pagesRef,\n      resetPages = _useTimelinePages.resetPages,\n      resetPagesDebounce = _useTimelinePages.resetPagesDebounce,\n      scrollToPageDebounce = _useTimelinePages.scrollToPageDebounce,\n      shouldResetPages = _useTimelinePages.shouldResetPages,\n      isOutOfRange = _useTimelinePages.isOutOfRange;\n\n  useEffect(function () {\n    if (date !== prevDate.current) {\n      var datePageIndex = pagesRef.current.indexOf(date);\n\n      if (updateSource !== UpdateSources.LIST_DRAG) {\n        if (isOutOfRange(datePageIndex)) {\n          updateSource === UpdateSources.DAY_PRESS ? resetPages(date) : resetPagesDebounce(date);\n        } else {\n          scrollToPageDebounce(datePageIndex);\n        }\n      }\n\n      prevDate.current = date;\n    }\n  }, [date, updateSource]);\n  var onScroll = useCallback(function () {\n    if (shouldResetPages.current) {\n      resetPagesDebounce.cancel();\n    }\n  }, []);\n  var onMomentumScrollEnd = useCallback(function () {\n    if (shouldResetPages.current) {\n      resetPagesDebounce(prevDate.current);\n    }\n  }, []);\n  var onPageChange = useCallback(throttle(function (pageIndex) {\n    var newDate = pagesRef.current[pageIndex];\n\n    if (newDate !== prevDate.current) {\n      setDate(newDate, UpdateSources.LIST_DRAG);\n    }\n  }, 0), []);\n  var onReachNearEdge = useCallback(function () {\n    shouldResetPages.current = true;\n  }, []);\n  var onTimelineOffsetChange = useCallback(function (offset) {\n    setTimelineOffset(offset);\n  }, []);\n  var renderPage = useCallback(function (_type, item, index) {\n    var timelineEvent = events[item];\n    var isCurrent = prevDate.current === item;\n    var isInitialPage = index === INITIAL_PAGE;\n\n    var _isToday = isToday(new XDate(item));\n\n    var _timelineProps = _objectSpread(_objectSpread({}, timelineProps), {}, {\n      key: item,\n      date: item,\n      events: timelineEvent,\n      scrollToNow: _isToday && isInitialPage && scrollToNow,\n      initialTime: !_isToday && isInitialPage ? initialTime : undefined,\n      scrollToFirst: !_isToday && isInitialPage && scrollToFirst,\n      scrollOffset: timelineOffset,\n      onChangeOffset: onTimelineOffsetChange,\n      showNowIndicator: _isToday && showNowIndicator\n    });\n\n    if (renderItem) {\n      return renderItem(_timelineProps, {\n        item: item,\n        index: index,\n        isCurrent: isCurrent,\n        isInitialPage: isInitialPage,\n        isToday: _isToday\n      });\n    }\n\n    return React.createElement(React.Fragment, null, React.createElement(Timeline, _timelineProps));\n  }, [events, timelineOffset, showNowIndicator]);\n  return React.createElement(InfiniteList, {\n    ref: listRef,\n    data: pages,\n    renderItem: renderPage,\n    onPageChange: onPageChange,\n    onReachNearEdge: onReachNearEdge,\n    onReachNearEdgeThreshold: NEAR_EDGE_THRESHOLD,\n    onScroll: onScroll,\n    extendedState: {\n      todayEvents: events[date],\n      pages: pages\n    },\n    initialPageIndex: INITIAL_PAGE,\n    scrollViewProps: {\n      onMomentumScrollEnd: onMomentumScrollEnd\n    }\n  });\n};\n\nexport default TimelineList;","map":{"version":3,"sources":["C:/Users/Eileen Twimasi/WebstormProjects/NYU-Library-Frontend/node_modules/react-native-calendars/src/timeline-list/index.js"],"names":["React","useCallback","useContext","useEffect","useRef","useState","throttle","XDate","Context","UpdateSources","isToday","Timeline","InfiniteList","useTimelinePages","INITIAL_PAGE","NEAR_EDGE_THRESHOLD","TimelineList","props","timelineProps","events","renderItem","showNowIndicator","scrollToFirst","scrollToNow","initialTime","date","updateSource","setDate","listRef","prevDate","timelineOffset","setTimelineOffset","pages","pagesRef","resetPages","resetPagesDebounce","scrollToPageDebounce","shouldResetPages","isOutOfRange","current","datePageIndex","indexOf","LIST_DRAG","DAY_PRESS","onScroll","cancel","onMomentumScrollEnd","onPageChange","pageIndex","newDate","onReachNearEdge","onTimelineOffsetChange","offset","renderPage","_type","item","index","timelineEvent","isCurrent","isInitialPage","_isToday","_timelineProps","key","undefined","scrollOffset","onChangeOffset","todayEvents"],"mappings":"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","sourcesContent":["import React, { useCallback, useContext, useEffect, useRef, useState } from 'react';\n// import {Text} from 'react-native';\nimport throttle from 'lodash/throttle';\nimport XDate from 'xdate';\nimport Context from '../expandableCalendar/Context';\nimport { UpdateSources } from '../expandableCalendar/commons';\nimport { isToday } from '../dateutils';\nimport Timeline from '../timeline/Timeline';\nimport InfiniteList from '../infinite-list';\nimport useTimelinePages, { INITIAL_PAGE, NEAR_EDGE_THRESHOLD } from './useTimelinePages';\nconst TimelineList = (props) => {\n    const { timelineProps, events, renderItem, showNowIndicator, scrollToFirst, scrollToNow, initialTime } = props;\n    const { date, updateSource, setDate } = useContext(Context);\n    const listRef = useRef();\n    const prevDate = useRef(date);\n    const [timelineOffset, setTimelineOffset] = useState();\n    const { pages, pagesRef, resetPages, resetPagesDebounce, scrollToPageDebounce, shouldResetPages, isOutOfRange } = useTimelinePages({ date, listRef });\n    useEffect(() => {\n        if (date !== prevDate.current) {\n            const datePageIndex = pagesRef.current.indexOf(date);\n            if (updateSource !== UpdateSources.LIST_DRAG) {\n                if (isOutOfRange(datePageIndex)) {\n                    updateSource === UpdateSources.DAY_PRESS ? resetPages(date) : resetPagesDebounce(date);\n                }\n                else {\n                    scrollToPageDebounce(datePageIndex);\n                }\n            }\n            prevDate.current = date;\n        }\n    }, [date, updateSource]);\n    const onScroll = useCallback(() => {\n        if (shouldResetPages.current) {\n            resetPagesDebounce.cancel();\n        }\n    }, []);\n    const onMomentumScrollEnd = useCallback(() => {\n        if (shouldResetPages.current) {\n            resetPagesDebounce(prevDate.current);\n        }\n    }, []);\n    const onPageChange = useCallback(throttle((pageIndex) => {\n        const newDate = pagesRef.current[pageIndex];\n        if (newDate !== prevDate.current) {\n            setDate(newDate, UpdateSources.LIST_DRAG);\n        }\n    }, 0), []);\n    const onReachNearEdge = useCallback(() => {\n        shouldResetPages.current = true;\n    }, []);\n    const onTimelineOffsetChange = useCallback(offset => {\n        setTimelineOffset(offset);\n    }, []);\n    const renderPage = useCallback((_type, item, index) => {\n        const timelineEvent = events[item];\n        const isCurrent = prevDate.current === item;\n        const isInitialPage = index === INITIAL_PAGE;\n        const _isToday = isToday(new XDate(item));\n        const _timelineProps = {\n            ...timelineProps,\n            key: item,\n            date: item,\n            events: timelineEvent,\n            scrollToNow: _isToday && isInitialPage && scrollToNow,\n            initialTime: !_isToday && isInitialPage ? initialTime : undefined,\n            scrollToFirst: !_isToday && isInitialPage && scrollToFirst,\n            scrollOffset: timelineOffset,\n            onChangeOffset: onTimelineOffsetChange,\n            showNowIndicator: _isToday && showNowIndicator\n        };\n        if (renderItem) {\n            return renderItem(_timelineProps, { item, index, isCurrent, isInitialPage, isToday: _isToday });\n        }\n        return (<>\n          <Timeline {..._timelineProps}/>\n          {/* NOTE: Keeping this for easy debugging */}\n          {/* <Text style={{position: 'absolute'}}>{item}</Text> */}\n        </>);\n    }, [events, timelineOffset, showNowIndicator]);\n    return (<InfiniteList ref={listRef} data={pages} renderItem={renderPage} onPageChange={onPageChange} onReachNearEdge={onReachNearEdge} onReachNearEdgeThreshold={NEAR_EDGE_THRESHOLD} onScroll={onScroll} extendedState={{ todayEvents: events[date], pages }} initialPageIndex={INITIAL_PAGE} scrollViewProps={{\n            onMomentumScrollEnd\n        }}/>);\n};\nexport default TimelineList;\n"]},"metadata":{},"sourceType":"module"}