{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport PropTypes from 'prop-types';\nimport get from 'lodash/get';\nimport map from 'lodash/map';\nimport isFunction from 'lodash/isFunction';\nimport isUndefined from 'lodash/isUndefined';\nimport debounce from 'lodash/debounce';\nimport isEqual from 'lodash/isEqual';\nimport XDate from 'xdate';\nimport React, { useCallback, useContext, useEffect, useMemo, useRef } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport SectionList from \"react-native-web/dist/exports/SectionList\";\nimport { useDidUpdate } from \"../hooks\";\nimport { getMoment } from \"../momentResolver\";\nimport { isToday, isGTE, sameDate } from \"../dateutils\";\nimport { parseDate } from \"../interface\";\nimport { getDefaultLocale } from \"../services\";\nimport { UpdateSources, todayString } from \"./commons\";\nimport constants from \"../commons/constants\";\nimport styleConstructor from \"./style\";\nimport Context from \"./Context\";\nvar viewabilityConfig = {\n  itemVisiblePercentThreshold: 20\n};\nvar AgendaList = function AgendaList(props) {\n  var _sections$;\n  var theme = props.theme,\n    sections = props.sections,\n    scrollToNextEvent = props.scrollToNextEvent,\n    _props$viewOffset = props.viewOffset,\n    viewOffset = _props$viewOffset === void 0 ? 0 : _props$viewOffset,\n    avoidDateUpdates = props.avoidDateUpdates,\n    onScroll = props.onScroll,\n    onMomentumScrollBegin = props.onMomentumScrollBegin,\n    onMomentumScrollEnd = props.onMomentumScrollEnd,\n    onScrollToIndexFailed = props.onScrollToIndexFailed,\n    renderSectionHeader = props.renderSectionHeader,\n    sectionStyle = props.sectionStyle,\n    keyExtractor = props.keyExtractor,\n    dayFormatter = props.dayFormatter,\n    _props$dayFormat = props.dayFormat,\n    dayFormat = _props$dayFormat === void 0 ? 'dddd, MMM d' : _props$dayFormat,\n    useMoment = props.useMoment,\n    _props$markToday = props.markToday,\n    markToday = _props$markToday === void 0 ? true : _props$markToday,\n    onViewableItemsChanged = props.onViewableItemsChanged;\n  var _useContext = useContext(Context),\n    date = _useContext.date,\n    updateSource = _useContext.updateSource,\n    setDate = _useContext.setDate,\n    setDisabled = _useContext.setDisabled;\n  var style = useRef(styleConstructor(theme));\n  var list = useRef();\n  var _topSection = useRef((_sections$ = sections[0]) == null ? void 0 : _sections$.title);\n  var didScroll = useRef(false);\n  var sectionScroll = useRef(false);\n  var sectionHeight = useRef(0);\n  useEffect(function () {\n    if (date !== _topSection.current) {\n      setTimeout(function () {\n        scrollToSection(date);\n      }, 500);\n    }\n  }, []);\n  useDidUpdate(function () {\n    if (updateSource !== UpdateSources.LIST_DRAG && updateSource !== UpdateSources.CALENDAR_INIT) {\n      scrollToSection(date);\n    }\n  }, [date]);\n  var getSectionIndex = function getSectionIndex(date) {\n    var i;\n    map(sections, function (section, index) {\n      if (section.title === date) {\n        i = index;\n      }\n    });\n    return i;\n  };\n  var getNextSectionIndex = function getNextSectionIndex(date) {\n    var i = 0;\n    for (var j = 1; j < sections.length; j++) {\n      var _sections, _sections$j;\n      var prev = parseDate((_sections = sections[j - 1]) == null ? void 0 : _sections.title);\n      var next = parseDate((_sections$j = sections[j]) == null ? void 0 : _sections$j.title);\n      var cur = new XDate(date);\n      if (isGTE(cur, prev) && isGTE(next, cur)) {\n        i = sameDate(prev, cur) ? j - 1 : j;\n        break;\n      } else if (isGTE(cur, next)) {\n        i = j;\n      }\n    }\n    return i;\n  };\n  var getSectionTitle = useCallback(function (title) {\n    if (!title) return;\n    var sectionTitle = title;\n    if (dayFormatter) {\n      sectionTitle = dayFormatter(title);\n    } else if (dayFormat) {\n      if (useMoment) {\n        var moment = getMoment();\n        sectionTitle = moment(title).format(dayFormat);\n      } else {\n        sectionTitle = new XDate(title).toString(dayFormat);\n      }\n    }\n    if (markToday) {\n      var string = getDefaultLocale().today || todayString;\n      var today = isToday(title);\n      sectionTitle = today ? string + \", \" + sectionTitle : sectionTitle;\n    }\n    return sectionTitle;\n  }, []);\n  var scrollToSection = useCallback(debounce(function (d) {\n    var sectionIndex = scrollToNextEvent ? getNextSectionIndex(d) : getSectionIndex(d);\n    if (isUndefined(sectionIndex)) {\n      return;\n    }\n    if (list != null && list.current && sectionIndex !== undefined) {\n      var _sections$sectionInde;\n      sectionScroll.current = true;\n      _topSection.current = (_sections$sectionInde = sections[sectionIndex]) == null ? void 0 : _sections$sectionInde.title;\n      list == null ? void 0 : list.current.scrollToLocation({\n        animated: true,\n        sectionIndex: sectionIndex,\n        itemIndex: 0,\n        viewPosition: 0,\n        viewOffset: (constants.isAndroid ? sectionHeight.current : 0) + viewOffset\n      });\n    }\n  }, 1000, {\n    leading: false,\n    trailing: true\n  }), [viewOffset, sections]);\n  var _onViewableItemsChanged = useCallback(function (info) {\n    if (info != null && info.viewableItems && !sectionScroll.current) {\n      var topSection = get(info == null ? void 0 : info.viewableItems[0], 'section.title');\n      if (topSection && topSection !== _topSection.current) {\n        _topSection.current = topSection;\n        if (didScroll.current && !avoidDateUpdates) {\n          setDate == null ? void 0 : setDate(_topSection.current, UpdateSources.LIST_DRAG);\n        }\n      }\n    }\n    onViewableItemsChanged == null ? void 0 : onViewableItemsChanged(info);\n  }, [avoidDateUpdates, setDate, onViewableItemsChanged]);\n  var _onScroll = useCallback(function (event) {\n    if (!didScroll.current) {\n      didScroll.current = true;\n      scrollToSection.cancel();\n    }\n    onScroll == null ? void 0 : onScroll(event);\n  }, [onScroll]);\n  var _onMomentumScrollBegin = useCallback(function (event) {\n    setDisabled == null ? void 0 : setDisabled(true);\n    onMomentumScrollBegin == null ? void 0 : onMomentumScrollBegin(event);\n  }, [onMomentumScrollBegin, setDisabled]);\n  var _onMomentumScrollEnd = useCallback(function (event) {\n    sectionScroll.current = false;\n    setDisabled == null ? void 0 : setDisabled(false);\n    onMomentumScrollEnd == null ? void 0 : onMomentumScrollEnd(event);\n  }, [onMomentumScrollEnd, setDisabled]);\n  var headerTextStyle = useMemo(function () {\n    return [style.current.sectionText, sectionStyle];\n  }, [sectionStyle]);\n  var _onScrollToIndexFailed = useCallback(function (info) {\n    if (onScrollToIndexFailed) {\n      onScrollToIndexFailed(info);\n    } else {\n      console.log('onScrollToIndexFailed info: ', info);\n    }\n  }, [onScrollToIndexFailed]);\n  var onHeaderLayout = useCallback(function (event) {\n    sectionHeight.current = event.nativeEvent.layout.height;\n  }, []);\n  var _renderSectionHeader = useCallback(function (info) {\n    var _info$section;\n    var title = info == null ? void 0 : (_info$section = info.section) == null ? void 0 : _info$section.title;\n    if (renderSectionHeader) {\n      return renderSectionHeader(title);\n    }\n    var headerTitle = getSectionTitle(title);\n    return React.createElement(AgendaSectionHeader, {\n      title: headerTitle,\n      style: headerTextStyle,\n      onLayout: onHeaderLayout\n    });\n  }, [headerTextStyle]);\n  var _keyExtractor = useCallback(function (item, index) {\n    return isFunction(keyExtractor) ? keyExtractor(item, index) : String(index);\n  }, [keyExtractor]);\n  return React.createElement(SectionList, _extends({\n    stickySectionHeadersEnabled: true\n  }, props, {\n    ref: list,\n    keyExtractor: _keyExtractor,\n    showsVerticalScrollIndicator: false,\n    onViewableItemsChanged: _onViewableItemsChanged,\n    viewabilityConfig: viewabilityConfig,\n    renderSectionHeader: _renderSectionHeader,\n    onScroll: _onScroll,\n    onMomentumScrollBegin: _onMomentumScrollBegin,\n    onMomentumScrollEnd: _onMomentumScrollEnd,\n    onScrollToIndexFailed: _onScrollToIndexFailed\n  }));\n};\nfunction areTextPropsEqual(prev, next) {\n  return isEqual(prev.style, next.style) && prev.title === next.title;\n}\nvar AgendaSectionHeader = React.memo(function (props) {\n  return React.createElement(Text, {\n    allowFontScaling: false,\n    style: props.style,\n    onLayout: props.onLayout\n  }, props.title);\n}, areTextPropsEqual);\nexport default AgendaList;\nAgendaList.displayName = 'AgendaList';\nAgendaList.propTypes = {\n  dayFormat: PropTypes.string,\n  dayFormatter: PropTypes.func,\n  useMoment: PropTypes.bool,\n  markToday: PropTypes.bool,\n  sectionStyle: PropTypes.oneOfType([PropTypes.object, PropTypes.number, PropTypes.array]),\n  avoidDateUpdates: PropTypes.bool\n};","map":{"version":3,"names":["PropTypes","get","map","isFunction","isUndefined","debounce","isEqual","XDate","React","useCallback","useContext","useEffect","useMemo","useRef","Text","SectionList","useDidUpdate","getMoment","isToday","isGTE","sameDate","parseDate","getDefaultLocale","UpdateSources","todayString","constants","styleConstructor","Context","viewabilityConfig","itemVisiblePercentThreshold","AgendaList","props","_sections$","theme","sections","scrollToNextEvent","_props$viewOffset","viewOffset","avoidDateUpdates","onScroll","onMomentumScrollBegin","onMomentumScrollEnd","onScrollToIndexFailed","renderSectionHeader","sectionStyle","keyExtractor","dayFormatter","_props$dayFormat","dayFormat","useMoment","_props$markToday","markToday","onViewableItemsChanged","_useContext","date","updateSource","setDate","setDisabled","style","list","_topSection","title","didScroll","sectionScroll","sectionHeight","current","setTimeout","scrollToSection","LIST_DRAG","CALENDAR_INIT","getSectionIndex","i","section","index","getNextSectionIndex","j","length","_sections","_sections$j","prev","next","cur","getSectionTitle","sectionTitle","moment","format","toString","string","today","d","sectionIndex","undefined","_sections$sectionInde","scrollToLocation","animated","itemIndex","viewPosition","isAndroid","leading","trailing","_onViewableItemsChanged","info","viewableItems","topSection","_onScroll","event","cancel","_onMomentumScrollBegin","_onMomentumScrollEnd","headerTextStyle","sectionText","_onScrollToIndexFailed","console","log","onHeaderLayout","nativeEvent","layout","height","_renderSectionHeader","_info$section","headerTitle","createElement","AgendaSectionHeader","onLayout","_keyExtractor","item","String","_extends","stickySectionHeadersEnabled","ref","showsVerticalScrollIndicator","areTextPropsEqual","memo","allowFontScaling","displayName","propTypes","func","bool","oneOfType","object","number","array"],"sources":["C:/Users/letha/WebstormProjects/NYU-Library-Frontend/node_modules/react-native-calendars/src/expandableCalendar/agendaList.js"],"sourcesContent":["import PropTypes from 'prop-types';\nimport get from 'lodash/get';\nimport map from 'lodash/map';\nimport isFunction from 'lodash/isFunction';\nimport isUndefined from 'lodash/isUndefined';\nimport debounce from 'lodash/debounce';\nimport isEqual from 'lodash/isEqual';\nimport XDate from 'xdate';\nimport React, { useCallback, useContext, useEffect, useMemo, useRef } from 'react';\nimport { Text, SectionList } from 'react-native';\nimport { useDidUpdate } from '../hooks';\nimport { getMoment } from '../momentResolver';\nimport { isToday, isGTE, sameDate } from '../dateutils';\nimport { parseDate } from '../interface';\nimport { getDefaultLocale } from '../services';\nimport { UpdateSources, todayString } from './commons';\nimport constants from '../commons/constants';\nimport styleConstructor from './style';\nimport Context from './Context';\nconst viewabilityConfig = {\n    itemVisiblePercentThreshold: 20 // 50 means if 50% of the item is visible\n};\n/**\n * @description: AgendaList component\n * @note: Should be wrapped with 'CalendarProvider'\n * @extends: SectionList\n * @example: https://github.com/wix/react-native-calendars/blob/master/example/src/screens/expandableCalendar.js\n */\nconst AgendaList = (props) => {\n    const { theme, sections, scrollToNextEvent, viewOffset = 0, avoidDateUpdates, onScroll, onMomentumScrollBegin, onMomentumScrollEnd, onScrollToIndexFailed, renderSectionHeader, sectionStyle, keyExtractor, dayFormatter, dayFormat = 'dddd, MMM d', useMoment, markToday = true, onViewableItemsChanged, } = props;\n    const { date, updateSource, setDate, setDisabled } = useContext(Context);\n    const style = useRef(styleConstructor(theme));\n    const list = useRef();\n    const _topSection = useRef(sections[0]?.title);\n    const didScroll = useRef(false);\n    const sectionScroll = useRef(false);\n    const sectionHeight = useRef(0);\n    useEffect(() => {\n        if (date !== _topSection.current) {\n            setTimeout(() => {\n                scrollToSection(date);\n            }, 500);\n        }\n    }, []);\n    useDidUpdate(() => {\n        // NOTE: on first init data should set first section to the current date!!!\n        if (updateSource !== UpdateSources.LIST_DRAG && updateSource !== UpdateSources.CALENDAR_INIT) {\n            scrollToSection(date);\n        }\n    }, [date]);\n    const getSectionIndex = (date) => {\n        let i;\n        map(sections, (section, index) => {\n            // NOTE: sections titles should match current date format!!!\n            if (section.title === date) {\n                i = index;\n            }\n        });\n        return i;\n    };\n    const getNextSectionIndex = (date) => {\n        let i = 0;\n        for (let j = 1; j < sections.length; j++) {\n            const prev = parseDate(sections[j - 1]?.title);\n            const next = parseDate(sections[j]?.title);\n            const cur = new XDate(date);\n            if (isGTE(cur, prev) && isGTE(next, cur)) {\n                i = sameDate(prev, cur) ? j - 1 : j;\n                break;\n            }\n            else if (isGTE(cur, next)) {\n                i = j;\n            }\n        }\n        return i;\n    };\n    const getSectionTitle = useCallback((title) => {\n        if (!title)\n            return;\n        let sectionTitle = title;\n        if (dayFormatter) {\n            sectionTitle = dayFormatter(title);\n        }\n        else if (dayFormat) {\n            if (useMoment) {\n                const moment = getMoment();\n                sectionTitle = moment(title).format(dayFormat);\n            }\n            else {\n                sectionTitle = new XDate(title).toString(dayFormat);\n            }\n        }\n        if (markToday) {\n            const string = getDefaultLocale().today || todayString;\n            const today = isToday(title);\n            sectionTitle = today ? `${string}, ${sectionTitle}` : sectionTitle;\n        }\n        return sectionTitle;\n    }, []);\n    const scrollToSection = useCallback(debounce((d) => {\n        const sectionIndex = scrollToNextEvent ? getNextSectionIndex(d) : getSectionIndex(d);\n        if (isUndefined(sectionIndex)) {\n            return;\n        }\n        if (list?.current && sectionIndex !== undefined) {\n            sectionScroll.current = true; // to avoid setDate() in onViewableItemsChanged\n            _topSection.current = sections[sectionIndex]?.title;\n            list?.current.scrollToLocation({\n                animated: true,\n                sectionIndex: sectionIndex,\n                itemIndex: 0,\n                viewPosition: 0,\n                viewOffset: (constants.isAndroid ? sectionHeight.current : 0) + viewOffset\n            });\n        }\n    }, 1000, { leading: false, trailing: true }), [viewOffset, sections]);\n    const _onViewableItemsChanged = useCallback((info) => {\n        if (info?.viewableItems && !sectionScroll.current) {\n            const topSection = get(info?.viewableItems[0], 'section.title');\n            if (topSection && topSection !== _topSection.current) {\n                _topSection.current = topSection;\n                if (didScroll.current && !avoidDateUpdates) {\n                    // to avoid setDate() on first load (while setting the initial context.date value)\n                    setDate?.(_topSection.current, UpdateSources.LIST_DRAG);\n                }\n            }\n        }\n        onViewableItemsChanged?.(info);\n    }, [avoidDateUpdates, setDate, onViewableItemsChanged]);\n    const _onScroll = useCallback((event) => {\n        if (!didScroll.current) {\n            didScroll.current = true;\n            scrollToSection.cancel();\n        }\n        onScroll?.(event);\n    }, [onScroll]);\n    const _onMomentumScrollBegin = useCallback((event) => {\n        setDisabled?.(true);\n        onMomentumScrollBegin?.(event);\n    }, [onMomentumScrollBegin, setDisabled]);\n    const _onMomentumScrollEnd = useCallback((event) => {\n        // when list momentum ends AND when scrollToSection scroll ends\n        sectionScroll.current = false;\n        setDisabled?.(false);\n        onMomentumScrollEnd?.(event);\n    }, [onMomentumScrollEnd, setDisabled]);\n    const headerTextStyle = useMemo(() => [style.current.sectionText, sectionStyle], [sectionStyle]);\n    const _onScrollToIndexFailed = useCallback((info) => {\n        if (onScrollToIndexFailed) {\n            onScrollToIndexFailed(info);\n        }\n        else {\n            console.log('onScrollToIndexFailed info: ', info);\n        }\n    }, [onScrollToIndexFailed]);\n    const onHeaderLayout = useCallback((event) => {\n        sectionHeight.current = event.nativeEvent.layout.height;\n    }, []);\n    const _renderSectionHeader = useCallback((info) => {\n        const title = info?.section?.title;\n        if (renderSectionHeader) {\n            return renderSectionHeader(title);\n        }\n        const headerTitle = getSectionTitle(title);\n        return <AgendaSectionHeader title={headerTitle} style={headerTextStyle} onLayout={onHeaderLayout}/>;\n    }, [headerTextStyle]);\n    const _keyExtractor = useCallback((item, index) => {\n        return isFunction(keyExtractor) ? keyExtractor(item, index) : String(index);\n    }, [keyExtractor]);\n    return (<SectionList stickySectionHeadersEnabled {...props} ref={list} keyExtractor={_keyExtractor} showsVerticalScrollIndicator={false} onViewableItemsChanged={_onViewableItemsChanged} viewabilityConfig={viewabilityConfig} renderSectionHeader={_renderSectionHeader} onScroll={_onScroll} onMomentumScrollBegin={_onMomentumScrollBegin} onMomentumScrollEnd={_onMomentumScrollEnd} onScrollToIndexFailed={_onScrollToIndexFailed}/>);\n    // _getItemLayout = (data, index) => {\n    //   return {length: constants.screenWidth, offset: constants.screenWidth * index, index};\n    // }\n};\nfunction areTextPropsEqual(prev, next) {\n    return isEqual(prev.style, next.style) && prev.title === next.title;\n}\nconst AgendaSectionHeader = React.memo((props) => {\n    return (<Text allowFontScaling={false} style={props.style} onLayout={props.onLayout}>\n      {props.title}\n    </Text>);\n}, areTextPropsEqual);\nexport default AgendaList;\nAgendaList.displayName = 'AgendaList';\nAgendaList.propTypes = {\n    dayFormat: PropTypes.string,\n    dayFormatter: PropTypes.func,\n    useMoment: PropTypes.bool,\n    markToday: PropTypes.bool,\n    sectionStyle: PropTypes.oneOfType([PropTypes.object, PropTypes.number, PropTypes.array]),\n    avoidDateUpdates: PropTypes.bool\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}