{"ast":null,"code":"import e from \"react\";\nimport n from \"dequal\";\n\nvar r,\n    t = function t(e) {\n  return function (n) {\n    return Promise.resolve(e.fn.apply(e, n.data[0])).then(function (n) {\n      var r,\n          t = \"auto\" === e.transferable && (r = n, \"ArrayBuffer\" in self && r instanceof ArrayBuffer || \"MessagePort\" in self && r instanceof MessagePort || \"ImageBitmap\" in self && r instanceof ImageBitmap || \"OffscreenCanvas\" in self && r instanceof OffscreenCanvas) ? [n] : [];\n      postMessage([\"SUCCESS\", n], t);\n    }).catch(function (e) {\n      postMessage([\"ERROR\", e]);\n    });\n  };\n},\n    a = function a(e, n, r) {\n  var a = \"\\n    \" + function (e) {\n    return 0 === e.length ? \"\" : \"importScripts(\" + e.map(function (e) {\n      return \"'\" + e + \"'\";\n    }).toString() + \")\";\n  }(n) + \";\\n    onmessage=(\" + t + \")({\\n      fn: (\" + e + \"),\\n      transferable: '\" + r + \"'\\n    })\\n  \",\n      o = new Blob([a], {\n    type: \"text/javascript\"\n  });\n\n  return URL.createObjectURL(o);\n};\n\n!function (e) {\n  e.PENDING = \"PENDING\", e.SUCCESS = \"SUCCESS\", e.RUNNING = \"RUNNING\", e.ERROR = \"ERROR\", e.TIMEOUT_EXPIRED = \"TIMEOUT_EXPIRED\";\n}(r || (r = {}));\nvar o,\n    u = r;\n!function (e) {\n  e.AUTO = \"auto\", e.NONE = \"none\";\n}(o || (o = {}));\n\nvar i = {\n  timeout: void 0,\n  remoteDependencies: [],\n  autoTerminate: !0,\n  transferable: o.AUTO\n},\n    c = function c(r, t) {\n  void 0 === t && (t = i);\n  var c,\n      s,\n      f,\n      l = e.useState(u.PENDING),\n      m = l[0],\n      v = l[1],\n      R = e.useRef(),\n      d = e.useRef(!1),\n      p = e.useRef({}),\n      E = e.useRef(),\n      w = e.useCallback(function (e) {\n    d.current = e === u.RUNNING, v(e);\n  }, []),\n      C = e.useCallback(function () {\n    var e;\n    null !== (e = R.current) && void 0 !== e && e._url && (R.current.terminate(), URL.revokeObjectURL(R.current._url), p.current = {}, R.current = void 0, window.clearTimeout(E.current));\n  }, []),\n      N = e.useCallback(function (e) {\n    (null != t.autoTerminate ? t.autoTerminate : i.autoTerminate) && C(), w(e);\n  }, [t.autoTerminate, C, w]),\n      T = (c = function c() {\n    var e = t.remoteDependencies,\n        n = t.timeout,\n        o = void 0 === n ? i.timeout : n,\n        c = t.transferable,\n        s = a(r, void 0 === e ? i.remoteDependencies : e, void 0 === c ? i.transferable : c),\n        f = new Worker(s);\n    return f._url = s, f.onmessage = function (e) {\n      var n,\n          r,\n          t,\n          a,\n          o = e.data,\n          i = o[1];\n\n      switch (o[0]) {\n        case u.SUCCESS:\n          null === (n = (r = p.current).resolve) || void 0 === n || n.call(r, i), N(u.SUCCESS);\n          break;\n\n        default:\n          null === (t = (a = p.current).reject) || void 0 === t || t.call(a, i), N(u.ERROR);\n      }\n    }, f.onerror = function (e) {\n      var n, r;\n      null === (n = (r = p.current).reject) || void 0 === n || n.call(r, e), N(u.ERROR);\n    }, o && (E.current = window.setTimeout(function () {\n      C(), w(u.TIMEOUT_EXPIRED);\n    }, o)), f;\n  }, f = e.useRef(s = [r, t, C]), n(f.current, s) || (f.current = s), e.useCallback(c, f.current)),\n      U = e.useCallback(function () {\n    var e = [].slice.call(arguments),\n        n = t,\n        r = n.transferable,\n        a = void 0 === r ? i.transferable : r;\n    return new Promise(function (n, r) {\n      var t, i;\n      p.current = ((t = {}).resolve = n, t.reject = r, t);\n      var c = a === o.AUTO ? e.filter(function (e) {\n        return \"ArrayBuffer\" in window && e instanceof ArrayBuffer || \"MessagePort\" in window && e instanceof MessagePort || \"ImageBitmap\" in window && e instanceof ImageBitmap || \"OffscreenCanvas\" in window && e instanceof OffscreenCanvas;\n      }) : [];\n      null === (i = R.current) || void 0 === i || i.postMessage([[].concat(e)], c), w(u.RUNNING);\n    });\n  }, [w]),\n      b = e.useCallback(function () {\n    var e = null != t.autoTerminate ? t.autoTerminate : i.autoTerminate;\n    return d.current ? (console.error(\"[useWorker] You can only run one instance of the worker at a time, if you want to run more than one in parallel, create another instance with the hook useWorker(). Read more: https://github.com/alewin/useWorker\"), Promise.reject()) : (!e && R.current || (R.current = T()), U.apply(void 0, [].slice.call(arguments)));\n  }, [t.autoTerminate, T, U]),\n      O = {\n    status: m,\n    kill: C\n  };\n  return e.useEffect(function () {\n    return function () {\n      C();\n    };\n  }, [C]), [b, O];\n};\n\nexport { r as WORKER_STATUS, c as useWorker };","map":{"version":3,"sources":["/Users/hannahzhao/WebstormProjects/NYU-Library-Frontend/node_modules/expo-camera/node_modules/@koale/useworker/dist/index.mjs"],"names":["e","n","r","t","Promise","resolve","fn","apply","data","then","transferable","self","ArrayBuffer","MessagePort","ImageBitmap","OffscreenCanvas","postMessage","catch","a","length","map","toString","o","Blob","type","URL","createObjectURL","PENDING","SUCCESS","RUNNING","ERROR","TIMEOUT_EXPIRED","u","AUTO","NONE","i","timeout","remoteDependencies","autoTerminate","c","s","f","l","useState","m","v","R","useRef","d","p","E","w","useCallback","current","C","_url","terminate","revokeObjectURL","window","clearTimeout","N","T","Worker","onmessage","call","reject","onerror","setTimeout","U","slice","arguments","filter","concat","b","console","error","O","status","kill","useEffect","WORKER_STATUS","useWorker"],"mappings":"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","sourcesContent":["import e from\"react\";import n from\"dequal\";var r,t=function(e){return function(n){return Promise.resolve(e.fn.apply(e,n.data[0])).then(function(n){var r,t=\"auto\"===e.transferable&&(r=n,\"ArrayBuffer\"in self&&r instanceof ArrayBuffer||\"MessagePort\"in self&&r instanceof MessagePort||\"ImageBitmap\"in self&&r instanceof ImageBitmap||\"OffscreenCanvas\"in self&&r instanceof OffscreenCanvas)?[n]:[];postMessage([\"SUCCESS\",n],t)}).catch(function(e){postMessage([\"ERROR\",e])})}},a=function(e,n,r){var a=\"\\n    \"+function(e){return 0===e.length?\"\":\"importScripts(\"+e.map(function(e){return\"'\"+e+\"'\"}).toString()+\")\"}(n)+\";\\n    onmessage=(\"+t+\")({\\n      fn: (\"+e+\"),\\n      transferable: '\"+r+\"'\\n    })\\n  \",o=new Blob([a],{type:\"text/javascript\"});return URL.createObjectURL(o)};!function(e){e.PENDING=\"PENDING\",e.SUCCESS=\"SUCCESS\",e.RUNNING=\"RUNNING\",e.ERROR=\"ERROR\",e.TIMEOUT_EXPIRED=\"TIMEOUT_EXPIRED\"}(r||(r={}));var o,u=r;!function(e){e.AUTO=\"auto\",e.NONE=\"none\"}(o||(o={}));var i={timeout:void 0,remoteDependencies:[],autoTerminate:!0,transferable:o.AUTO},c=function(r,t){void 0===t&&(t=i);var c,s,f,l=e.useState(u.PENDING),m=l[0],v=l[1],R=e.useRef(),d=e.useRef(!1),p=e.useRef({}),E=e.useRef(),w=e.useCallback(function(e){d.current=e===u.RUNNING,v(e)},[]),C=e.useCallback(function(){var e;null!==(e=R.current)&&void 0!==e&&e._url&&(R.current.terminate(),URL.revokeObjectURL(R.current._url),p.current={},R.current=void 0,window.clearTimeout(E.current))},[]),N=e.useCallback(function(e){(null!=t.autoTerminate?t.autoTerminate:i.autoTerminate)&&C(),w(e)},[t.autoTerminate,C,w]),T=(c=function(){var e=t.remoteDependencies,n=t.timeout,o=void 0===n?i.timeout:n,c=t.transferable,s=a(r,void 0===e?i.remoteDependencies:e,void 0===c?i.transferable:c),f=new Worker(s);return f._url=s,f.onmessage=function(e){var n,r,t,a,o=e.data,i=o[1];switch(o[0]){case u.SUCCESS:null===(n=(r=p.current).resolve)||void 0===n||n.call(r,i),N(u.SUCCESS);break;default:null===(t=(a=p.current).reject)||void 0===t||t.call(a,i),N(u.ERROR)}},f.onerror=function(e){var n,r;null===(n=(r=p.current).reject)||void 0===n||n.call(r,e),N(u.ERROR)},o&&(E.current=window.setTimeout(function(){C(),w(u.TIMEOUT_EXPIRED)},o)),f},f=e.useRef(s=[r,t,C]),n(f.current,s)||(f.current=s),e.useCallback(c,f.current)),U=e.useCallback(function(){var e=[].slice.call(arguments),n=t,r=n.transferable,a=void 0===r?i.transferable:r;return new Promise(function(n,r){var t,i;p.current=((t={}).resolve=n,t.reject=r,t);var c=a===o.AUTO?e.filter(function(e){return\"ArrayBuffer\"in window&&e instanceof ArrayBuffer||\"MessagePort\"in window&&e instanceof MessagePort||\"ImageBitmap\"in window&&e instanceof ImageBitmap||\"OffscreenCanvas\"in window&&e instanceof OffscreenCanvas}):[];null===(i=R.current)||void 0===i||i.postMessage([[].concat(e)],c),w(u.RUNNING)})},[w]),b=e.useCallback(function(){var e=null!=t.autoTerminate?t.autoTerminate:i.autoTerminate;return d.current?(console.error(\"[useWorker] You can only run one instance of the worker at a time, if you want to run more than one in parallel, create another instance with the hook useWorker(). Read more: https://github.com/alewin/useWorker\"),Promise.reject()):(!e&&R.current||(R.current=T()),U.apply(void 0,[].slice.call(arguments)))},[t.autoTerminate,T,U]),O={status:m,kill:C};return e.useEffect(function(){return function(){C()}},[C]),[b,O]};export{r as WORKER_STATUS,c as useWorker};\n//# sourceMappingURL=index.mjs.map\n"]},"metadata":{},"sourceType":"module"}